<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <title>Document</title>

<script>
        {% if msg %}
            alert("{{ msg }}")
        {% endif %}
        function login() {
            $.ajax({
                type: "POST",
                url: "/api/login",
                data: {id_give: $('#userid').val(), pw_give: $('#userpw').val()},
                success: function (response) {
                    if (response['result'] == 'success') {
                        $.cookie('mytoken', response['token']);

                        alert('로그인 완료!')
                        window.location.href = '/'
                    } else {
                        alert(response['msg'])
                    }
                }
            })
        }

    </script>
    <style>
        .img {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            margin-top: 14%;
            width: 80%;
            max-width: 95%;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .main {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            border-radius: 50px;
            margin-top: 5%;
            width: 50%;
            height: 80%;
            background-color: black;
            left: 10%;
        }

        .signup {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            border: 1px solid black;
            border-radius: 50px;
            width: 8%;
            height: 5%;
            top: 55%;
            right: 25%;
            max-width: 95%;
            margin-right: 2%;
        }

        .signin {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            border: 1px solid black;
            border-radius: 50px;
            width: 8%;
            height: 5%;
            top: 55%;
            right: 15%;
            max-width: 95%;
        }

        .idbtn {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            border: 1px solid black;
            border-radius: 50px;
            padding: 20px;
            width: 20%;
            top: 35%;
            right: 15%;
            max-width: 95%;
        }

        .pwbtn {
            position: absolute;
            display: inline-block;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            border: 1px solid black;
            border-radius: 50px;
            padding: 20px;
            width: 20%;
            top: 45%;
            right: 15%;
            max-width: 95%;
        }

    </style>
</head>
<body>
<div>
    <div class="main">
        <img src="https://www.nominate.com/images/largeflags/moda.gif" class="img">
    </div>
    <div>
        <div class="field is-horizontal">
            <input type="text" class="idbtn" id="userid" placeholder="My ID">
        </div>
        <div>
            <input type="password" class="pwbtn" id="userpw" placeholder="My Password">
        </div>
        <div>
            <button class="signup" onclick="login()">로그인</button>
            <button class="signin" onclick="window.location.href='/register'">회원가입</button>
        </div>
    </div>

</div>
</body>
</html>
