<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Moda</title>

    <!--  Reset  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css"/>
    <!--  google font  -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet" />
    <!-- material-icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <!-- ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
  <style>
      /* common */
      body {
          height: 3500px;

          font-family: 'Nanum Gothic', sans-serif;
          font-size: 16px;
          font-weight: 400;
          line-height: 1.4;
          color: #fff;

          background-color: black;
      }

      a {
          color: white;
          text-decoration: none;
      }

      img {
          display: block;

      }

      .btn {
          width: 130px;
          padding: 10px;
          border: 2px solid #333;
          border-radius: 50px;
          color: #333;
          font-size: 16px;
          font-weight: 700;
          text-align: center;
          cursor: pointer;
          box-sizing: border-box;
          display: block;
          transition: .4s;
      }

      .btn.btn--brown {
          color: #FFF;
          background-color: sandybrown;
      }

      .btn.btn--brown:hover {
          color: sandybrown;
          background-color: black;
          border-color: sandybrown;
      }


      /* HEADER */
      header {
          width: 500px;
          height: 100%;

          position: fixed;
          top: 0;
          left: 0;
          z-index: 9;

          border-right: 1px solid #333;
      }

      header .header_wrap {
          width: 100%;
          height: 100%;
          margin: auto;

          display: flex;
          flex-direction: column;
          align-items: flex-end;

      }

      .logo {
          display: block;
          width: 100%;

          margin-top: 180px;
      }

      header ul.main-menu {
          width: 300px;
          height: 100%;
      }

      header ul.main-menu li.item {
          width: 100%;
          margin-bottom: 50px;

          font-size: 36px;
          font-weight: bold;
      }

      header ul.main-menu li.item .material-icons {
          width: 40px;
          height: 50px;
          font-size: 35px;
      }


      /* MAINBODY */
      .wrap {
          max-width: 750px;
          width: 95%;
          height: 100%;

          margin: 0px auto 0 auto;
          margin-left: 500px;
          border-right: 1px solid #333;

          display: flex;
          flex-direction: column;
          align-items: center;
      }

      .wrap > .inners {
          width: 100%;
          height: 100%;
          margin: 20px auto 0 auto;
      }

      .wrap .material-icons {
          margin: 0 0 20px 20px;
          color: #333;
          cursor: pointer;
      }

      .wrap .material-icons:hover {
          color: darkgray;
      }

      .wrap .post_box {
          width: 100%;
          border-bottom: 1px solid #333;
      }

      .wrap .post_box .nickname {
          color: darkgray;
          font-size: 18px;
          font-weight: bold;

          padding: 20px;
      }

      .wrap .post_box .text_box {
          font-size: 26px;
          padding:  20px;
      }

      .wrap .post_box .img_box  {
          width: 100%;
          margin: 50px 0 70px 0;

          display: flex;
          justify-content: center;
          overflow: hidden;
      }

      .wrap > .inners .input_box {
          width: 100%;
          height: 200px;


          display: flex;
          flex-direction: column;
          flex-wrap: wrap;
          align-content: space-around;
          justify-content: center;
          align-items: flex-start;
          border-bottom: 1px solid #333;

      }

      .wrap > .inners .input_box .input_name {
          margin-bottom: 10px;
      }

      .wrap > .inners .input_box .input_name {

      }

      .wrap > .inners .input_box div p {
          font-size: 18px;
          margin-right: 10px;
      }

      .wrap > .inners .input_box input {
          width: 450px;
          height: 50px;
          font-size: 18px;
          color: #fff;
          margin-right: 20px;
          outline: none;

          border-color: transparent;
          border-bottom: 1px solid #333;

          background-color: transparent;
          transition: .4s;
      }

      .wrap > .inners .input_box input:focus {
          border-bottom: 3px solid #333;
      }

      .wrap .comment_wrap .comment_box {
          border-bottom: 1px solid #333;
          position: relative;
      }

      .wrap .comment_wrap .comment_box .nickname {
          color: darkgray;
          font-weight: bold;
          font-size: 18px;
          margin: 30px 0 20px 20px;
      }

      .wrap .comment_wrap .comment_box .nickname .material-icons {
          color: #333;
          cursor: pointer;
          position: absolute;
          top: 0;
          right: 20px;

      }

      .wrap .comment_wrap .comment_box .nickname .material-icons:hover {
          color: darkgray;
      }

      .wrap .comment_wrap .comment_box .comment {
          font-size: 26px;
          padding:  20px;
          margin-bottom: 30px;
      }

      #to-top {
          width: 42px;
          height: 42px;
          background-color: sandybrown;
          color: #fff;
          border-radius: 10px;
          display: flex;
          justify-content: center;
          align-items: center;
          position: fixed;
          bottom: 30px;
          right: 30px;
          cursor: pointer;
          z-index: 9;
      }

  </style>

    <script>
        $(document).ready(function () {
            show_comment();
        });

        function show_comment() {
            $.ajax({
                type: "GET",
                url: "/comment/comment1",
                data: {},
                success: function (response) {
                    let rows = response['comment'];

                    for (let i = 0; i < rows.length; ++i) {
                        let user = rows[i]['user']
                        let num = rows[i]['comment_num']
                        let comment = rows[i]['comment']

                        let temp_html = `<ul class="comment_box">
                                            <li class="nickname">
                                                <a onclick="cancel_comment(${num})" ><div class="material-icons">cancel</div></a>
                                                <p>${user}</p>
                                            </li>
                                            <li class="comment">
                                                <p>${comment}</p>
                                            </li>
                                        </ul>`
                        $('#cm_wrap').append(temp_html)

                    }
                }
            });
        }
        $(document).ready(function () {
            show_diary();
        });
        function show_diary() {
            $.ajax({
                type: "GET",
                url: "/comment/comment2",
                data: {},
                success: function (response) {
                    let rows = response['comment_test'];

                        for (let i = 0; i < rows.length; ++i) {
                                // let num = rows[i]['write_num']

                                let user = rows[i]['user']
                                let comment = rows[i]['comment']

                                let temp_html = `<div class="nickname">
                                            <div>- ${user} -</div>
                                        </div>
                                        <div class="text_box">
                                            <p>${comment}</p>
                                        </div>`
                                $('#diary').append(temp_html)


                        }

                }
            });
        }

        function save_comment() {
            let user = $('#user').val()
            let comment = $('#comment').val()
            $.ajax({
                type: "POST",
                url: "/comment/comment1",
                data: { comment_give: comment, user_give: user },
                success: function (response) {
                    alert(response["msg"])
                    window.location.reload()
                }
            });
        }

        function cancel_comment(num) {
            let cancel = confirm("댓글을 삭제 하시겠습니까?")
            if (cancel) {
                $.ajax({
                type: "POST",
                url: "/comment/done",
                data: {num_give: num},
                success: function (response) {
                    alert(response["msg"])
                    window.location.reload()
                }
            });
            } else {

            }
        }

    </script>


<body>
    <header>
        <div class="header_wrap">
            <ul class="main-menu">
                <li class="item">
                    <a href="javascript:void(0)" class="logo">
                        <img src="../static/img/logo.png" alt="moda"/>
                    </a>
                </li>
                <li class="item">
                    <div class="material-icons">home</div>
                    <a href="javascript:void(0)">Home</a>
                </li>
                <li class="item">
                    <div class="material-icons">list alt</div>
                    <a href="javascript:void(0)">Mypage</a>
                </li>
            </ul>
        </div>
    </header>

    <div class="wrap">
        <div class="inners">
            <a href="/mypage" class="material-icons">arrow_back</a>
            <div id="diary" class="post_box">
                <div class="nickname">
                    <div>- MinJae -</div>
                </div>
                <div class="text_box">
                    <p>안녕하세요~!반갑습니다 ~! 아아앙아우우우웅이이이이아아아 <br/>줄바꿈</p>
                </div>
            </div>
            <div class="input_box">
                <div class="input_name">
                    <div><p>작성자</p></div>
                    <input id="user" type="text" placeholder="작성자 입력 해주세요" />
                </div>
                <div class="input_comment">
                    <div><p>댓글</p></div>
                    <input id="comment" type="text" placeholder="코멘트를 입력 해주세요" />
                </div>
                <button onclick="save_comment()" class="btn btn--brown">Sumit</button>
            </div>
            <div id="cm_wrap" class="comment_wrap">

            </div>
        </div>
    </div>

    <div id="to-top">
      <a class="material-icons">arrow_upward</a>
    </div>

    <script>
        const scrollTo = document.querySelector('#to-top');

        scrollTo.addEventListener('click', () => {
        window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });
      });

    </script>

</body>
</html>
